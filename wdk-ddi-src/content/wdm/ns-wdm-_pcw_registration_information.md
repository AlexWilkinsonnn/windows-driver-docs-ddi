---
UID: NS:wdm._PCW_REGISTRATION_INFORMATION
title: _PCW_REGISTRATION_INFORMATION (wdm.h)
description: The PCW_REGISTRATION_INFORMATION structure supplies details about the provider and the counter set.
old-location: devtest\pcw_registration_information.htm
tech.root: devtest
ms.assetid: f5305351-10b4-47e6-a8b6-e1a91c605ca9
ms.date: 02/23/2018
keywords: ["_PCW_REGISTRATION_INFORMATION structure"]
ms.keywords: "*PPCW_REGISTRATION_INFORMATION, PCW_REGISTRATION_INFORMATION, PCW_REGISTRATION_INFORMATION structure [Driver Development Tools], PPCW_REGISTRATION_INFORMATION, PPCW_REGISTRATION_INFORMATION structure pointer [Driver Development Tools], _PCW_REGISTRATION_INFORMATION, devtest.pcw_registration_information, km_pcw_a740182f-4844-4a98-9493-522087a3d27c.xml, wdm/PCW_REGISTRATION_INFORMATION, wdm/PPCW_REGISTRATION_INFORMATION"
f1_keywords:
 - "wdm/PCW_REGISTRATION_INFORMATION"
req.header: wdm.h
req.include-header: Wdm.h, Ntddk.h
req.target-type: Windows
req.target-min-winverclnt: Available in Windows 7 and later versions of Windows.
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: 
req.dll: 
req.irql: 
topic_type:
- APIRef
- kbSyntax
api_type:
- HeaderDef
api_location:
- wdm.h
api_name:
- PCW_REGISTRATION_INFORMATION
product:
- Windows
targetos: Windows
req.typenames: PCW_REGISTRATION_INFORMATION, *PPCW_REGISTRATION_INFORMATION
---

# _PCW_REGISTRATION_INFORMATION structure

## -description

The `PCW_REGISTRATION_INFORMATION` structure supplies details about the provider and the counter set. Most developers do not need to access this structure directly because it is automatically managed by the counterset registration code generated by the <a href="https://docs.microsoft.com/windows/win32/perfctrs/ctrpp">CTRPP.exe</a> tool.

## -struct-fields

### -field Version

The numeric value that specifies the version of Performance Counters for Windows (PCW) that the provider supports. This value should be set to `PCW_CURRENT_VERSION`, which is equivalent to one of the following values:

<table>
<tr>
<th>Condition</th><th>Value</th>
</tr>
<tr>
<td>NTDDI_VERSION &lt; NTDDI_WIN10_FE</td>
<td>PCW_VERSION_1 (0x0100)</td>
</tr>
<tr>
<td>NTDDI_VERSION &gt;= NTDDI_WIN10_FE</td>
<td>PCW_VERSION_2 (0x0200)</td>
</tr>
</table>

On versions of Windows prior to Windows 10 20H1 (NTDDI_WIN10_MN), this field *MUST* be set to `PCW_VERSION_1` (0x100).

### -field Name

A pointer to the string that contains the name of the counterset to register. This string may not be NULL or blank.

Note that counterset name comparisons are not case-sensitive. If the same counterset name is used in two counterset registrations, data will be collected from both registrations.

### -field CounterCount

The number of counters that are exposed by this registration.

### -field Counters

A pointer to the array that describes the counters. The data in this array is used when extracting counter values from `PCW_DATA` blocks.

### -field Callback

A pointer to the optional <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-pcw_callback">PcwCallback</a> function that notifies the provider about events related to this counter set.

### -field CallbackContext

A pointer value that will be passed to the provider-defined `PcwCallback` each time it is invoked.

### -field Flags

This field is only available when `NTDDI_VERSION >= NTDDI_WIN10_MN`.

This field will be ignored if the `Version` field is set to `PCW_VERSION_1`.

Enables special behavior of `PcwRegister`. Set to a combination of one or more `PCW_REGISTRATION_FLAGS` values:

<table>
<tr>
<th>PCW_REGISTRATION_FLAGS</th><th>Meaning</th>
</tr>
<tr>
<td>PcwRegistrationNone (0x0)</td>
<td>
Default (no special behaviors required).
</td>
</tr>
<tr>
<td>PcwRegistrationSiloNeutral (0x1)</td>
<td>
Indicates that this registration should be visible to consumers in all server silos. By default, a registration is visible only to consumers in the server silo that was active when the registration was created (i.e. the registration that was attached to the thread when `PcwRegister` was called).
</td>
</tr>
</table>

## -remarks

The <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwregister">PcwRegister</a> function takes, as a parameter, a pointer to this structure to serve as the registration handle.

## -see-also

<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_counter_descriptor">PCW_COUNTER_DESCRIPTOR</a>

<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nc-wdm-pcw_callback">PcwCallback</a>

<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwregister">PcwRegister</a>

<a href="https://docs.microsoft.com/windows/win32/perfctrs/ctrpp">CTRPP.exe</a>
